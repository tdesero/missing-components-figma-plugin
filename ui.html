<ul id="list"></ul>
<button id="find">Find</button>
<script>
  document.getElementById("find").onclick = () => {
    parent.postMessage({ pluginMessage: { type: "find" } }, "*");
  };

  function getNodeById(id) {
    parent.postMessage({ pluginMessage: { type: "getNode", id: id } }, "*");
  }

  window.onmessage = (msg) => {
    // console.log("nodes", msg.data.pluginMessage.nodes);
    const list = document.getElementById("list");
    list.innerHTML = "";

    msg.data.pluginMessage.nodes.forEach((n) => {
      const el = document.createElement("li");
      el.innerText = `${n.name}`;
      el.addEventListener("click", () => {
        getNodeById(n.id);
      });
      list.appendChild(el);
    });
  };
</script>
